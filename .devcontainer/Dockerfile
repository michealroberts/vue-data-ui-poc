# //////////////////////////////////////////////////////////////////////////////////////////////////////////////////// #

# Use an argument to specify the Node.js variant/version
ARG VARIANT=20

# //////////////////////////////////////////////////////////////////////////////////////////////////////////////////// #

# Use Microsoft's official VS Code Dev Container image for TypeScript/JavaScript/Node.js
FROM mcr.microsoft.com/vscode/devcontainers/typescript-node:0-${VARIANT}

# //////////////////////////////////////////////////////////////////////////////////////////////////////////////////// #

# Switch to root to install additional packages
USER root

# Install necessary packages: zsh, git, curl, wget
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
    zsh \
    git \
    curl \
    wget && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Install pnpm globally using npm
RUN npm install -g pnpm

# Verify the installations
RUN node --version && npm --version && pnpm --version

# //////////////////////////////////////////////////////////////////////////////////////////////////////////////////// #

# Set environment variables
ENV PACKAGE_MANAGER=pnpm
ENV SHELL=/bin/zsh

# //////////////////////////////////////////////////////////////////////////////////////////////////////////////////// #